{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","personService","getAll","axios","get","then","response","data","addPerson","nameObject","post","deletePerson","id","console","log","delete","updateNumber","newObject","put","Person","person","deleteClick","name","number","onClick","Filter","newFilter","handleFilterChange","value","onChange","PersonForm","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","personsToShow","map","Notification","message","className","ErrorNotification","errorMessage","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilter","setMessage","setErrorMessage","useEffect","filter","toLowerCase","includes","event","target","preventDefault","some","window","confirm","find","changedPerson","returnedPerson","setTimeout","catch","error","n","concat","returnedThing","ReactDOM","render","document","getElementById"],"mappings":"yMACMA,EAAU,eAyBDC,EAFO,CAAEC,OArBT,WAEX,OADgBC,IAAMC,IAAIJ,GACXK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAmBbC,UAhBd,SAAAC,GAEd,OADgBN,IAAMO,KAAKV,EAASS,GACrBJ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAcFI,aAXtB,SAAAC,GAGjB,OAFAC,QAAQC,IAAR,UAAed,EAAf,YAA0BY,IACVT,IAAMY,OAAN,UAAgBf,EAAhB,YAA2BY,IAC5BP,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAQYS,aALpC,SAACJ,EAAIK,GAEtB,OADgBd,IAAMe,IAAN,UAAalB,EAAb,YAAwBY,GAAMK,GAC/BZ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,U,OClBvCY,EAAS,SAAC,GAAD,IAAEC,EAAF,EAAEA,OAAQC,EAAV,EAAUA,YAAV,OACb,8BAAID,EAAOE,KAAX,IAAkBF,EAAOG,OAAzB,IAAiC,wBAAQC,QAASH,EAAjB,wBAG7BI,EAAS,SAAC,GAAD,IAAEC,EAAF,EAAEA,UAAWC,EAAb,EAAaA,mBAAb,OACb,qDAAuB,uBAAOC,MAAOF,EAAWG,SAAUF,QAGtDG,EAAa,SAAC,GAAD,IAAEtB,EAAF,EAAEA,UAAWuB,EAAb,EAAaA,QAASC,EAAtB,EAAsBA,iBAAkBC,EAAxC,EAAwCA,UAAWC,EAAnD,EAAmDA,mBAAnD,OACjB,uBAAMC,SAAU3B,EAAhB,UACE,yCAAW,uBAAOoB,MAAOG,EAASF,SAAUG,OAC5C,2CAAa,uBAAOJ,MAAOK,EAAWJ,SAAUK,OAChD,8BACE,wBAAQE,KAAK,SAAb,uBAKAC,EAAU,SAAC,GAAD,IAAGC,EAAH,EAAGA,cAAejB,EAAlB,EAAkBA,YAAlB,OACd,8BACGiB,EAAcC,KAAI,SAAAnB,GAAM,OAAI,cAAC,EAAD,CAA0BA,OAAQA,EAAQC,YAAa,kBAAMA,EAAYD,KAA5DA,EAAOE,YAI/CkB,EAAe,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACtB,OAAgB,OAAZA,EACK,KAGP,qBAAKC,UAAU,UAAf,SACGD,KAMDE,EAAoB,SAAC,GAAsB,IAApBC,EAAmB,EAAnBA,aAC3B,OAAqB,OAAjBA,EACK,KAGP,qBAAKF,UAAU,QAAf,SACGE,KAsIQC,EA/HH,WACV,MAA+BC,mBAAS,IAAxC,mBAAQC,EAAR,KAAiBC,EAAjB,KACA,EAAgCF,mBAAS,IAAzC,mBAAQf,EAAR,KAAiBkB,EAAjB,KACA,EAAoCH,mBAAS,IAA7C,mBAAQb,EAAR,KAAmBiB,EAAnB,KACA,EAAoCJ,mBAAS,IAA7C,mBAAQpB,EAAR,KAAmByB,EAAnB,KACA,EAAgCL,mBAAS,MAAzC,mBAAQL,EAAR,KAAiBW,EAAjB,KACA,EAA0CN,mBAAS,MAAnD,mBAAQF,EAAR,KAAsBS,EAAtB,KAEAC,qBAAU,WACRrD,EACGC,SACAG,MAAK,SAAA0C,GACJC,EAAWD,QAEf,IAEF,IAAMT,EAAgBS,EAAQQ,QAAO,SAAAnC,GAAM,OAAIA,EAAOE,KAAKkC,cAAcC,SAAS/B,EAAU8B,kBA0F5F,OACE,gCACE,2CACA,cAAC,EAAD,CAAcf,QAASA,IACvB,cAAC,EAAD,CAAmBG,aAAcA,IACjC,cAAC,EAAD,CAAQlB,UAAWA,EAAWC,mBAnFP,SAAC+B,GAC1B7C,QAAQC,IAAI4C,EAAMC,OAAO/B,OACzBuB,EAAaO,EAAMC,OAAO/B,UAkFxB,2CACA,cAAC,EAAD,CACApB,UAhEc,SAACkD,GACjBA,EAAME,iBACN,IAAMnD,EAAa,CACjBa,KAAMS,EACNR,OAAQU,GAGV,GAAIc,EAAQc,MAAK,SAAAzC,GAAM,OAAIA,EAAOE,OAASS,MACzC,GAAI+B,OAAOC,QAAP,UAAkBhC,EAAlB,yEAAkG,CAEpG,IAAMX,EAAS2B,EAAQiB,MAAK,SAAA5C,GAAM,OAAIA,EAAOE,OAASS,KAChDkC,EAAa,2BAAO7C,GAAP,IAAeG,OAAQU,IAE1ChC,EACGe,aAAaiD,EAAcrD,GAAIqD,GAC/B5D,MAAK,SAAA6D,GACJrD,QAAQC,IAAIoD,GACZjB,EAAW,IACXC,EAAa,IACbF,EAAWD,EAAQR,KAAI,SAAAnB,GAAM,OAAIA,EAAOR,KAAOqD,EAAcrD,GAAKQ,EAAS6C,MAC3Eb,EAAW,GAAD,OACLc,EAAe5C,KADV,+BAGV6C,YAAW,WACPf,EAAW,QACV,QAENgB,OAAM,SAAAC,GACLrB,EAAWD,EAAQQ,QAAO,SAAAe,GAAC,OAAIA,EAAE1D,KAAOqD,EAAcrD,OACtDyC,EAAgB,kBAAD,OACKY,EAAc3C,KADnB,0CAGf6C,YAAW,WACPd,EAAgB,QACf,KACLxC,QAAQC,IAAI,iBAIlBb,EACGO,UAAUC,GACVJ,MAAK,SAAA6D,GACJrD,QAAQC,IAAIoD,GACZlB,EAAWD,EAAQwB,OAAOL,IAC1BjB,EAAW,IACXC,EAAa,IACbE,EAAW,SAAD,OACCc,EAAe5C,OAE1B6C,YAAW,WACPf,EAAW,QACV,SAcTrB,QAASA,EACTC,iBAlGqB,SAAC0B,GACxB7C,QAAQC,IAAI4C,EAAMC,OAAO/B,OACzBqB,EAAWS,EAAMC,OAAO/B,QAiGtBK,UAAWA,EACXC,mBA/FuB,SAACwB,GAC1B7C,QAAQC,IAAI4C,EAAMC,OAAO/B,OACzBsB,EAAaQ,EAAMC,OAAO/B,UA+FxB,yCACA,cAAC,EAAD,CAASU,cAAeA,EAAejB,YAxFjB,SAACD,GACzBP,QAAQC,IAAR,UAAeM,EAAOR,GAAtB,2BACIkD,OAAOC,QAAP,iBAAyB3C,EAAOE,KAAhC,OACFrB,EACCU,aAAaS,EAAOR,IACpBP,MAAK,SAAAmE,GACJxB,EAAWD,EAAQQ,QAAO,SAAAe,GAAC,OAAIA,EAAE1D,KAAOQ,EAAOR,OAC/CwC,EAAW,GAAD,OACLhC,EAAOE,KADF,+BAGV6C,YAAW,WACPf,EAAW,QACV,e,MC7FbqB,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.8639292a.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst addPerson = nameObject => {\r\n    const request = axios.post(baseUrl, nameObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = id => {\r\n    console.log(`${baseUrl}/${id}`)\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst updateNumber = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst personService = { getAll, addPerson, deletePerson, updateNumber }\r\n\r\nexport default personService","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\nconst Person = ({person, deleteClick }) => (\n  <p>{person.name} {person.number} <button onClick={deleteClick}>delete</button></p>\n)\n\nconst Filter = ({newFilter, handleFilterChange}) => (\n  <div>filter shown with <input value={newFilter} onChange={handleFilterChange}/></div>\n)\n\nconst PersonForm = ({addPerson, newName, handleNameChange, newNumber, handleNumberChange}) => (\n  <form onSubmit={addPerson}>\n    <div>name: <input value={newName} onChange={handleNameChange}/></div>\n    <div>number: <input value={newNumber} onChange={handleNumberChange}/></div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n)\n\nconst Persons = ({ personsToShow, deleteClick }) => (\n  <div>\n    {personsToShow.map(person => <Person key={person.name} person={person} deleteClick={() => deleteClick(person)}/>)}\n  </div>\n)\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className=\"message\">\n      {message}\n    </div>\n  )\n\n}\n\nconst ErrorNotification = ({ errorMessage }) => {\n  if (errorMessage === null) {\n    return null\n  }\n  return (\n    <div className=\"error\">\n      {errorMessage}\n    </div>\n  )\n\n}\n\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ message, setMessage ] = useState(null)\n  const [ errorMessage, setErrorMessage ] = useState(null)\n  \n  useEffect(() =>{\n    personService\n      .getAll()\n      .then(persons =>{\n        setPersons(persons)\n      })\n  },[])\n\n  const personsToShow = persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase()))\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value)\n    setNewFilter(event.target.value)\n  }\n\n  const handleDeleteClick = (person) => {\n    console.log(`${person.id} delete button clicked`)\n    if (window.confirm(`delete ${person.name}?`)) {\n      personService\n      .deletePerson(person.id)\n      .then(returnedThing => {\n        setPersons(persons.filter(n => n.id !== person.id))\n        setMessage(\n          `${person.name}'s number has been deleted`\n          )\n        setTimeout(() => {\n            setMessage(null)\n          }, 2000)\n      })\n    }\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    if (persons.some(person => person.name === newName)){\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with new one?`)) {\n\n        const person = persons.find(person => person.name === newName)\n        const changedPerson = {...person, number: newNumber}\n\n        personService\n          .updateNumber(changedPerson.id, changedPerson)\n          .then(returnedPerson => {\n            console.log(returnedPerson)\n            setNewName('')\n            setNewNumber('')\n            setPersons(persons.map(person => person.id !== changedPerson.id ? person : changedPerson ))\n            setMessage(\n              `${returnedPerson.name}'s number has been updated`\n              )\n            setTimeout(() => {\n                setMessage(null)\n              }, 2000)\n          })\n          .catch(error =>{\n            setPersons(persons.filter(n => n.id !== changedPerson.id))\n            setErrorMessage(\n              `Information of ${changedPerson.name} has already been removed from server`\n              )\n            setTimeout(() => {\n                setErrorMessage(null)\n              }, 5000)\n            console.log('fail')\n          })\n      }\n    } else {\n      personService\n        .addPerson(nameObject)\n        .then(returnedPerson => {\n          console.log(returnedPerson)\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          setMessage(\n            `Added ${returnedPerson.name}`\n            )\n          setTimeout(() => {\n              setMessage(null)\n            }, 2000)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={message} />\n      <ErrorNotification errorMessage={errorMessage} />\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange} />\n      <h2>add a new</h2>\n      <PersonForm \n      addPerson={addPerson}\n      newName={newName}\n      handleNameChange={handleNameChange}\n      newNumber={newNumber}\n      handleNumberChange={handleNumberChange} \n      />\n      <h2>Numbers</h2>\n      <Persons personsToShow={personsToShow} deleteClick={handleDeleteClick} />\n    </div>\n  )\n\n}\n\nexport default App","import ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')  \n)\n"],"sourceRoot":""}