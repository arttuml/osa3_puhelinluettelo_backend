(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(16),o=t.n(c),r=t(7),a=t(3),u=t(2),i=t(4),l=t.n(i),s="/api/persons",d={getAll:function(){return l.a.get(s).then((function(e){return e.data}))},addPerson:function(e){return l.a.post(s,e).then((function(e){return e.data}))},deletePerson:function(e){return console.log("".concat(s,"/").concat(e)),l.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},updateNumber:function(e,n){return l.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))}},b=t(0),j=function(e){var n=e.person,t=e.deleteClick;return Object(b.jsxs)("p",{children:[n.name," ",n.number," ",Object(b.jsx)("button",{onClick:t,children:"delete"})]})},h=function(e){var n=e.newFilter,t=e.handleFilterChange;return Object(b.jsxs)("div",{children:["filter shown with ",Object(b.jsx)("input",{value:n,onChange:t})]})},f=function(e){var n=e.addPerson,t=e.newName,c=e.handleNameChange,o=e.newNumber,r=e.handleNumberChange;return Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:t,onChange:c})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:o,onChange:r})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var n=e.personsToShow,t=e.deleteClick;return Object(b.jsx)("div",{children:n.map((function(e){return Object(b.jsx)(j,{person:e,deleteClick:function(){return t(e)}},e.name)}))})},O=function(e){var n=e.message;return null===n?null:Object(b.jsx)("div",{className:"message",children:n})},g=function(e){var n=e.errorMessage;return null===n?null:Object(b.jsx)("div",{className:"error",children:n})},v=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(u.useState)(""),i=Object(a.a)(o,2),l=i[0],s=i[1],j=Object(u.useState)(""),v=Object(a.a)(j,2),p=v[0],x=v[1],w=Object(u.useState)(""),C=Object(a.a)(w,2),N=C[0],k=C[1],S=Object(u.useState)(null),P=Object(a.a)(S,2),T=P[0],y=P[1],F=Object(u.useState)(null),A=Object(a.a)(F,2),E=A[0],I=A[1];Object(u.useEffect)((function(){d.getAll().then((function(e){c(e)}))}),[]);var J=t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Phonebook"}),Object(b.jsx)(O,{message:T}),Object(b.jsx)(g,{errorMessage:E}),Object(b.jsx)(h,{newFilter:N,handleFilterChange:function(e){console.log(e.target.value),k(e.target.value)}}),Object(b.jsx)("h2",{children:"add a new"}),Object(b.jsx)(f,{addPerson:function(e){e.preventDefault();var n={name:l,number:p};if(t.some((function(e){return e.name===l}))){if(window.confirm("".concat(l," is already added to phonebook, replace the old number with new one?"))){var o=t.find((function(e){return e.name===l})),a=Object(r.a)(Object(r.a)({},o),{},{number:p});d.updateNumber(a.id,a).then((function(e){console.log(e),s(""),x(""),c(t.map((function(e){return e.id!==a.id?e:a}))),y("".concat(e.name,"'s number has been updated")),setTimeout((function(){y(null)}),2e3)})).catch((function(e){c(t.filter((function(e){return e.id!==a.id}))),I("Information of ".concat(a.name," has already been removed from server")),setTimeout((function(){I(null)}),5e3),console.log("fail")}))}}else d.addPerson(n).then((function(e){console.log(e),c(t.concat(e)),s(""),x(""),y("Added ".concat(e.name)),setTimeout((function(){y(null)}),2e3)}))},newName:l,handleNameChange:function(e){console.log(e.target.value),s(e.target.value)},newNumber:p,handleNumberChange:function(e){console.log(e.target.value),x(e.target.value)}}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(m,{personsToShow:J,deleteClick:function(e){console.log("".concat(e.id," delete button clicked")),window.confirm("delete ".concat(e.name,"?"))&&d.deletePerson(e.id).then((function(n){c(t.filter((function(n){return n.id!==e.id}))),y("".concat(e.name,"'s number has been deleted")),setTimeout((function(){y(null)}),2e3)}))}})]})};t(41);o.a.render(Object(b.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.8639292a.chunk.js.map